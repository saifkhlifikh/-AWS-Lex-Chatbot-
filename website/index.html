<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PawlPal Chat</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    :root {
        --aqua: #00c2c7;
        --aqua-light: #c9f9fb;
        --white: #fff;
        --bot-bubble: #e9fefe;
        --user-bubble: #00c2c7;
        --dark-bg: #0d0d0d;
    }

    body {
        margin: 0;
        background: #f7f7f7;
        font-family: "Poppins", sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    /* Chat container */
    #pawlpal-chat-wrapper {
        width: 380px;
        height: 550px;
        background: var(--white);
        border-radius: 22px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        position: relative;
    }

    /* Header */
    .pawlpal-header {
        background: var(--aqua);
        padding: 15px;
        display: flex;
        align-items: center;
        gap: 12px;
        color: white;
    }

    .mascot {
        width: 42px;
        height: 42px;
        border-radius: 50%;
        background: white;
        padding: 6px;
    }

    .status-dot {
        width: 10px;
        height: 10px;
        background: #4eff5a;
        border-radius: 50%;
        margin-left: auto;
        box-shadow: 0 0 10px #4eff5a;
    }

    /* Chat body */
    #pawlpal-chat-body {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
        background: var(--aqua-light);
    }

    /* Bubbles */
    .bubble {
        max-width: 80%;
        padding: 10px 14px;
        margin-bottom: 14px;
        display: flex;
        gap: 8px;
        border-radius: 18px;
        animation: fadeIn .25s ease;
        line-height: 1.35;
    }

    .bubble.bot {
        background: var(--bot-bubble);
        border-bottom-left-radius: 4px;
    }

    .bubble.user {
        background: var(--user-bubble);
        color: white;
        margin-left: auto;
        border-bottom-right-radius: 4px;
    }

    .bubble-avatar {
        width: 32px;
        height: 32px;
    }

    /* Input area */
    .pawlpal-input-area {
        padding: 10px;
        display: flex;
        gap: 8px;
        background: white;
        border-top: 1px solid #dcdcdc;
    }

    .pawlpal-input-area input {
        flex: 1;
        padding: 12px;
        border-radius: 14px;
        border: 1px solid #bbb;
        font-size: 15px;
    }

    #sendBtn {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        background: var(--aqua);
        color: white;
        font-size: 20px;
        border: none;
        cursor: pointer;
        transition: 0.2s;
    }

    #sendBtn:hover {
        transform: scale(1.1);
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
    }

    /* Mobile */
    @media (max-width: 430px) {
        #pawlpal-chat-wrapper {
            width: 95%;
            height: 90vh;
        }
    }
</style>
</head>

<body>

<div id="pawlpal-chat-wrapper">
    
    <!-- HEADER -->
    <div class="pawlpal-header">
        <img src="https://i.ibb.co/z5GbGDf/pet-face.png" class="mascot">
        <h2>PawlPal Chat</h2>
        <span class="status-dot"></span>
    </div>

    <!-- CHAT BODY -->
    <div id="pawlpal-chat-body">
        <div class="bubble bot">
            <img src="https://i.ibb.co/z5GbGDf/pet-face.png" class="bubble-avatar">
            <p>Hello! I'm PawlPal üêæ How can I help you today?</p>
        </div>
    </div>

    <!-- INPUT -->
    <div class="pawlpal-input-area">
        <input id="chatInput" type="text" placeholder="Type a message‚Ä¶" />
        <button id="sendBtn">‚û§</button>
    </div>

</div>

<script>
    const chatBody = document.getElementById("pawlpal-chat-body");
    const input = document.getElementById("chatInput");
    const btn = document.getElementById("sendBtn");

    function addUserMessage(text) {
        let div = document.createElement("div");
        div.className = "bubble user";
        div.innerHTML = `<p>${text}</p>`;
        chatBody.appendChild(div);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    function addBotMessage(text) {
        let div = document.createElement("div");
        div.className = "bubble bot";
        div.innerHTML = `
            <img src="https://i.ibb.co/z5GbGDf/pet-face.png" class="bubble-avatar">
            <p>${text}</p>
        `;
        chatBody.appendChild(div);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    async function sendToLex(text) {
        // TODO: Replace with real AWS Lex call
        return new Promise(res => {
            setTimeout(() => res("I‚Äôm PawlPal! I received: " + text), 600);
        });
    }

    btn.addEventListener("click", async () => {
        let msg = input.value.trim();
        if (!msg) return;

        addUserMessage(msg);
        input.value = "";

        // bot reply
        let reply = await sendToLex(msg);
        addBotMessage(reply);
    });
</script>

</body>
</html>
